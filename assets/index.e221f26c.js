import{j as y,r as c,A as k,a as v,F as L,R as b,b as N}from"./vendor.b051047c.js";const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}};S();const w="_light_1q9x4_1",j="_blinking_1q9x4_23",q="_blinker_1q9x4_1";var h={light:w,"light-red":"_light-red_1q9x4_7","light-yellow":"_light-yellow_1q9x4_11","light-green":"_light-green_1q9x4_15","light-active":"_light-active_1q9x4_19",blinking:j,blinker:q};const n=y.exports.jsx,x=y.exports.jsxs,p=({color:i,status:e})=>n("div",{className:`
        ${h.light} 
        ${h[`light-${i}`]} 
        ${e===1?h["light-active"]:e===2?h.blinking:h.light}`}),A="_stack_13a2z_1";var _={stack:A,"stack-text":"_stack-text_13a2z_7","stack-lights":"_stack-lights_13a2z_12"};const O=({device:i})=>{const[e,s]=c.exports.useState(0),[l,t]=c.exports.useState(0),[r,d]=c.exports.useState(0);c.exports.useState({red:0,yellow:0,green:0}),c.exports.useEffect(()=>{k.addModuleDataListener(m)},[i]);const f=(g,o,u)=>g+u*1e3<o,m=g=>{const o=g.streams;if(Object.keys(o).length===0)throw new Error("No streams.");Object.keys(o).forEach(u=>{const a=$(o,u);if(typeof a!="string"&&a!==void 0){if(o[u].data[0].name==="green.light"){if(f(a[0],g.time,10)){d(0);return}d(a[1])}if(o[u].data[0].name==="yellow.light"){if(f(a[0],g.time,10)){t(0);return}t(a[1])}if(o[u].data[0].name==="red.light"){if(f(a[0],g.time,10)){s(0);return}s(a[1])}}})};return x("div",{className:_.stack,children:[n("span",{className:_["stack-text"],children:"Stack Light Status"}),x("div",{className:_["stack-lights"],children:[n(p,{status:e,color:"red"}),n(p,{status:l,color:"yellow"}),n(p,{status:r,color:"green"})]})]})},$=(i,e)=>{if(i[e]===void 0)return"No stream.";if(i[e].loading)return;if(i[e].tooMuchData)return"Too much data.";if(i[e].data.length===0)return"No data.";const s=i[e].data[0].points.at(-1);return s||"No datapoints."},D=()=>{const[i,e]=c.exports.useState();c.exports.useEffect(()=>{s()},[]);const s=async()=>{if(await v.waitTilAuthenticated()){const l=await L.getCurrentDevice();e(l)}};return n("div",{className:"App",children:n(O,{device:i})})};b.render(n(N.StrictMode,{children:n(D,{})}),document.getElementById("root"));
