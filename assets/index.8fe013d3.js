import{j as p,r as g,A as _,a as y,F as x,R as k,b as v}from"./vendor.b051047c.js";const m=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const e of i)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const e={};return i.integrity&&(e.integrity=i.integrity),i.referrerpolicy&&(e.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?e.credentials="include":i.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(i){if(i.ep)return;i.ep=!0;const e=o(i);fetch(i.href,e)}};m();const N="_light_1q9x4_1",b="_blinking_1q9x4_23",w="_blinker_1q9x4_1";var l={light:N,"light-red":"_light-red_1q9x4_7","light-yellow":"_light-yellow_1q9x4_11","light-green":"_light-green_1q9x4_15","light-active":"_light-active_1q9x4_19",blinking:b,blinker:w};const n=p.exports.jsx,h=p.exports.jsxs,u=({color:r,status:t})=>n("div",{className:`
        ${l.light} 
        ${l[`light-${r}`]} 
        ${t===1?l["light-active"]:t===2?l.blinking:l.light}`}),L="_stack_13a2z_1";var f={stack:L,"stack-text":"_stack-text_13a2z_7","stack-lights":"_stack-lights_13a2z_12"};const S=({device:r})=>{const[t,o]=g.exports.useState({red:0,yellow:0,green:0});g.exports.useEffect(()=>{_.addModuleDataListener(a)},[r]);const a=i=>{const e=i.streams;if(Object.keys(e).length===0)throw new Error("No streams.");const s=t;Object.keys(e).forEach((d,q)=>{const c=O(e,d);typeof c!="string"&&c!==void 0&&(e[d].data[0].name==="green.light"&&(s.green=c),e[d].data[0].name==="yellow.light"&&(s.yellow=c),e[d].data[0].name==="red.light"&&(s.red=c))}),JSON.stringify(t)!==JSON.stringify(s)&&o(s)};return h("div",{className:f.stack,children:[n("span",{className:f["stack-text"],children:"Stack Light Status"}),h("div",{className:f["stack-lights"],children:[n(u,{status:t.red,color:"red"}),n(u,{status:t.yellow,color:"yellow"}),n(u,{status:t.green,color:"green"})]})]})},O=(r,t)=>{if(r[t]===void 0)return"No stream.";if(r[t].loading)return;if(r[t].tooMuchData)return"Too much data.";if(r[t].data.length===0)return"No data.";const o=r[t].data[0].points.at(-1);return o?o[1]:"No datapoints."},j=()=>{const[r,t]=g.exports.useState();g.exports.useEffect(()=>{o()},[]);const o=async()=>{if(await y.waitTilAuthenticated()){const a=await x.getCurrentDevice();t(a)}};return n("div",{className:"App",children:n(S,{device:r})})};k.render(n(v.StrictMode,{children:n(j,{})}),document.getElementById("root"));
